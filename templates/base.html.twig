<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    {# Título principal de la web. Uso block title para personalizarlo por página #}
    <title>{% block title %}CONSORIA Inmobiliaria{% endblock %}</title>
    <link rel="stylesheet" href="{{ asset('css/style.css') }}"> {# Enlazo el CSS ubicado en /public/css/style.css #}
</head>
<body>

    {# === MENÚ DE NAVEGACIÓN PERSONALIZADO ===
       Este menú se adapta según el tipo de usuario que esté autenticado. Mantengo coherencia y seguridad en la interfaz.
    #}
    <nav>
        {# LOGO DE LA EMPRESA
           Aquí muestro solo el logo de CONSORIA Inmobiliaria (sin texto), agrandado para mejor visibilidad.
           Al hacer clic, redirige siempre al inicio (ruta 'home').
        #}
        <a href="{{ path('home') }}">
            <img src="/assets/img/logo.png" alt="Logo CONSORIA Inmobiliaria" height="100" style="vertical-align: middle;">
        </a>

        {# NAVBAR PERSONALIZADA POR ROL. Acomodo enlaces y opciones según el usuario autenticado. #}
        {% if app.user %}

            {# === ADMIN === #}
            {% if 'ROLE_ADMIN' in app.user.roles %}
                <a href="{{ path('admin_dashboard') }}">Panel Admin</a>
                <a href="{{ path('admin_usuarios') }}">Usuarios</a>
                <a href="{{ path('admin_estadisticas') }}">Estadísticas</a>
                <span>Bienvenido, {{ app.user.email }}</span>
                <a href="{{ path('app_logout') }}">Cerrar sesión</a>

            {# === PROPIETARIO === #}
            {% elseif 'ROLE_PROPRIETAIRE' in app.user.roles %}
                <a href="{{ path('home') }}">Inicio</a>
                <a href="{{ path('buy') }}">Comprar</a>
                <a href="{{ path('sell') }}">Vender</a>
                <a href="{{ path('rent') }}">Arriendo/Vacacional</a>
                <a href="{{ path('proprietaire_dashboard') }}">Panel Propietario</a>
                <a href="{{ path('proprietaire_publicar_bien') }}">Publicar Bien</a>
                <a href="{{ path('contact') }}">Contacto</a>
                <span>Bienvenido, {{ app.user.email }}</span>
                <a href="{{ path('app_logout') }}">Cerrar sesión</a>

            {# === CLIENTE === #}
            {% elseif 'ROLE_CLIENT' in app.user.roles %}
                <a href="{{ path('home') }}">Inicio</a>
                <a href="{{ path('buy') }}">Comprar</a>
                <a href="{{ path('sell') }}">Vender</a>
                <a href="{{ path('rent') }}">Arriendo/Vacacional</a>
                <a href="{{ path('client_dashboard') }}">Mi Panel</a>
                <a href="{{ path('favoritos_index') }}">Mis Favoritos</a>
                <a href="{{ path('contact') }}">Contacto</a>
                <span>Bienvenido, {{ app.user.email }}</span>
                <a href="{{ path('app_logout') }}">Cerrar sesión</a>
            {% endif %}

        {% else %}
            {# === VISITANTE (NO LOGUEADO) === #}
            <a href="{{ path('home') }}">Inicio</a>
            <a href="{{ path('buy') }}">Comprar</a>
            <a href="{{ path('sell') }}">Vender</a>
            <a href="{{ path('rent') }}">Arriendo/Vacacional</a>
            <a href="{{ path('about') }}">Nosotros</a>
            <a href="{{ path('contact') }}">Contacto</a>
            <a href="{{ path('app_login') }}" class="btn btn-outline-primary">Iniciar sesión</a>
            <a href="{{ path('app_register') }}" class="btn btn-primary">Registrarse</a>
        {% endif %}
    </nav>

    {# === MENSAJES FLASH ===
       Aquí muestro mensajes generados por acciones del usuario (éxito, error, etc.)
    #}
    <div class="container">
        {% for label, messages in app.flashes %}
            {% for msg in messages %}
                <div class="alert alert-{{ label }}">{{ msg }}</div>
            {% endfor %}
        {% endfor %}

        {# === BLOQUE PRINCIPAL ===
           Cada página que extiende esta plantilla define su contenido en este bloque.
        #}
        {% block body %}{% endblock %}
    </div>

    {# === PIE DE PÁGINA FIJO ===
       Contiene la dirección en Colombia y Francia, más un contacto rápido.
    #}
    <footer>
        <div>
            <strong>Oficina en Bogotá - Colombia</strong>
            <p>Carrera 7 #85-24, Chapinero</p>
        </div>
        <div>
            <strong>Oficina en París - Francia</strong>
            <p>12 Rue de Paris, 75000 Paris</p>
        </div>
        <div>
            <strong>Habla con un agente</strong>
            <p><a href="#">WhatsApp</a></p>
        </div>
    </footer>
</body>
</html>
