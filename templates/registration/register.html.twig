{% extends 'base.html.twig' %}

{% block title %}Registro{% endblock %}

{% block body %}
    <h1>Crear una cuenta</h1>

    {{ form_start(registrationForm) }}

        {# Tipo de usuario al inicio #}
        <div style="margin-bottom: 1.5rem;">
            {{ form_row(registrationForm.typeUser) }}
        </div>

        {# Nombre completo (usamos solo firstName como campo visible) #}
        <div style="margin-bottom: 1.5rem;">
            {{ form_row(registrationForm.firstName, {'label': 'Nombre completo'}) }}
        </div>

        {# Teléfono #}
        <div style="margin-bottom: 1.5rem;">
            {{ form_row(registrationForm.phone) }}
        </div>

        {# Correo electrónico #}
        <div style="margin-bottom: 1.5rem;">
            {{ form_row(registrationForm.email) }}
        </div>

        {# Contraseña doble #}
        <div style="margin-bottom: 1.5rem;">
            {{ form_row(registrationForm.plainPassword) }}
        </div>

        {# Casilla de aceptación RGPD #}
        <div style="margin-bottom: 1rem;">
            {{ form_row(registrationForm.agreeTerms) }}
        </div>

        {# Enlace a términos y condiciones (resaltado en amarillo) #}
        <p style="margin-top: 0.5rem;">
            <a href="#" style="color: #FFEA00; font-weight: bold;" onclick="document.getElementById('popup-terms').style.display = 'block'; return false;">
                Leer términos y condiciones
            </a>
        </p>

        {# Botón de envío #}
        <div style="margin-top: 1.5rem;">
            <button class="btn">Registrarse</button>
        </div>

    {{ form_end(registrationForm) }}

    {# POPUP de RGPD #}
    <div id="popup-terms" style="display:none; position:fixed; top:10%; left:10%; width:80%; height:70%; background: #000; color: white; border:1px solid #ccc; box-shadow:0 0 10px rgba(0,0,0,0.5); padding:20px; overflow:auto; z-index:1000;">
        <h2>Términos y Condiciones – Consoria Inmobiliaria</h2>
        <p><strong>Responsable del tratamiento:</strong> Consoria Inmobiliaria, registrada en Francia, es responsable de la recopilación y tratamiento de sus datos personales.</p>

        <p><strong>Finalidad del tratamiento:</strong> Sus datos serán utilizados únicamente para:</p>
        <ul>
            <li>La gestión de su cuenta de usuario en la plataforma.</li>
            <li>El contacto entre clientes, propietarios y agentes inmobiliarios.</li>
            <li>La personalización de servicios según su perfil.</li>
        </ul>

        <p><strong>Base legal:</strong> El tratamiento se realiza con base en su consentimiento y en la ejecución de un contrato.</p>

        <p><strong>Almacenamiento y duración:</strong> Los datos se conservarán durante el tiempo necesario para cumplir con la finalidad para la que fueron recogidos, y por un máximo de 3 años sin actividad.</p>

        <p><strong>Destinatarios:</strong> Los datos no serán compartidos con terceros salvo obligación legal o proveedores estrictamente necesarios para el funcionamiento del servicio (como alojamiento web).</p>

        <p><strong>Transferencias internacionales:</strong> No se realizarán transferencias de datos fuera de la Unión Europea sin garantías adecuadas conforme al RGPD.</p>

        <p><strong>Derechos:</strong> De acuerdo con el RGPD, usted tiene derecho a acceder, rectificar, suprimir, limitar u oponerse al tratamiento de sus datos, así como a la portabilidad. Para ejercerlos, puede escribirnos a <strong>rgpd@consoria-inmobiliaria.fr</strong>.</p>

        <p><strong>Consentimiento:</strong> Al registrarse, usted declara haber leído y aceptado esta política de privacidad.</p>

        <button onclick="document.getElementById('popup-terms').style.display = 'none';" style="margin-top:15px;">Cerrar</button>
    </div>
{% endblock %}
